{% extends 'base.html' %}

{% block title %}Teacher Dashboard{% endblock %}

{% block content %}
    <h1>Welcome, {{ full_name }}! ğŸ‘¨â€ğŸ«</h1>
    <p>Manage your courses, create assignments, and track student progress.</p>
    
    {% if error %}
        <div style="background-color: #fee; border: 1px solid #f88; color: #c33; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px;">
            âš ï¸ {{ error }}
        </div>
    {% endif %}
    
    <div class="grid mt-30">
        <div class="card">
            <div class="card-header">ğŸ“š Total Courses</div>
            <div class="card-body">
                <h2 style="color: var(--accent-blue); font-size: 48px; margin: 0;">{{ my_courses | length }}</h2>
                <p>Courses you've created</p>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">ğŸ‘¥ Total Students</div>
            <div class="card-body">
                <h2 style="color: var(--accent-blue); font-size: 48px; margin: 0;">{{ total_students or 0 }}</h2>
                <p>Students enrolled</p>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">ğŸ“ Total Assignments</div>
            <div class="card-body">
                <h2 style="color: var(--accent-blue); font-size: 48px; margin: 0;">{{ total_assignments or 0 }}</h2>
                <p>Questions created</p>
            </div>
        </div>
    </div>
    
    <div class="section mt-30">
        <h2 class="section-title">Your Courses</h2>
        
        {% if my_courses %}
            <div class="grid">
                {% for course in my_courses %}
                    <div class="card">
                        <div class="card-header">{{ course.title }}</div>
                        <div class="card-body">
                            <p>{{ course.description or 'No description available' }}</p>
                            <p class="text-muted"><small>Created: {{ course.created_at or 'Unknown' }}</small></p>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <a href="{{ url_for('manage_course', course_id=course.id) }}" class="btn btn-primary" style="flex: 1; text-align: center;">Manage</a>
                                <a href="{{ url_for('manage_course', course_id=course.id) }}" class="btn btn-secondary" style="flex: 1; text-align: center;">Edit</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-muted">You haven't created any courses yet.</p>
        {% endif %}
        
        <a href="{{ url_for('create_course') }}" class="btn btn-primary mt-30">+ Create New Course</a>
    </div>
    
    <div style="margin-top: 30px; text-align: right;">
        <a href="{{ url_for('logout') }}" class="btn btn-outline">Logout</a>
    </div>
{% endblock %}

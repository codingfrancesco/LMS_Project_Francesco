{% extends 'base.html' %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
    <h1>ğŸ”§ Admin Dashboard</h1>
    <p>Manage users, courses, lessons, and assignments.</p>
    
    <div style="margin: 30px 0; display: flex; gap: 10px;">
        <a href="{{ url_for('create_course') }}" class="btn btn-primary">â• Create Course</a>
        <a href="{{ url_for('teacher_dashboard') }}" class="btn btn-secondary">â† Back</a>
    </div>
    
    <div class="grid mt-30">
        <div class="card" style="text-align: center;">
            <div class="card-header">ğŸ‘¥ Total Users</div>
            <div class="card-body">
                <h2 style="color: var(--accent-blue); font-size: 48px; margin: 0;">{{ users|length or 0 }}</h2>
                <p>Registered users</p>
            </div>
        </div>
        <div class="card" style="text-align: center;">
            <div class="card-header">ğŸ“š Total Courses</div>
            <div class="card-body">
                <h2 style="color: var(--accent-blue); font-size: 48px; margin: 0;">{{ courses_count or 0 }}</h2>
                <p>Created courses</p>
            </div>
        </div>
    </div>
    
    <div class="section mt-30">
        <h2 class="section-title">ğŸ‘¥ All Users</h2>
        {% if users %}
            <div style="overflow-x: auto; margin-top: 20px;">
                <table style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px;">
                    <thead>
                        <tr style="background: #f0f4f8; border-bottom: 2px solid #d4dce6;">
                            <th style="padding: 15px; text-align: left; font-weight: 600;">ID</th>
                            <th style="padding: 15px; text-align: left; font-weight: 600;">Username</th>
                            <th style="padding: 15px; text-align: left; font-weight: 600;">Email</th>
                            <th style="padding: 15px; text-align: left; font-weight: 600;">Name</th>
                            <th style="padding: 15px; text-align: left; font-weight: 600;">Role</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                            <tr style="border-bottom: 1px solid #ecf0f1;">
                                <td style="padding: 15px;">{{ user.id }}</td>
                                <td style="padding: 15px;">{{ user.username }}</td>
                                <td style="padding: 15px;">{{ user.email }}</td>
                                <td style="padding: 15px;">{{ user.full_name }}</td>
                                <td style="padding: 15px;">
                                    <span style="background: {% if user.role == 'teacher' %}#c8e6c9{% else %}#e3f2fd{% endif %}; color: {% if user.role == 'teacher' %}#2e7d32{% else %}#1565c0{% endif %}; padding: 5px 10px; border-radius: 4px; font-weight: 600;">{{ user.role }}</span>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <p class="text-muted">No users found.</p>
        {% endif %}
    </div>
{% endblock %}

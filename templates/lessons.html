{% extends 'base.html' %}

{% block title %}Lessons & Topics{% endblock %}

{% block content %}
    <h1>üìñ Lessons & Topics</h1>
    <p>Learn from our carefully curated lessons covering various topics and subjects.</p>
    
    {% if error %}
        <div style="background: #fee; border: 1px solid #f88; color: #c33; padding: 12px 16px; border-radius: 8px; margin-bottom: 20px;">
            ‚ö†Ô∏è {{ error }}
        </div>
    {% endif %}
    
    <div style="margin: 20px 0;">
        <input type="text" id="searchInput" placeholder="üîç Search lessons..." style="width: 100%; padding: 12px 16px; border: 2px solid var(--border-color); border-radius: 8px; font-size: 16px;">
    </div>
    
    {% if lessons %}
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px; margin-top: 30px;">
            {% for lesson in lessons %}
                <div class="card lesson-card" style="transition: all 0.3s ease; cursor: pointer; overflow: hidden;">
                    <div style="background: linear-gradient(135deg, var(--accent-blue), var(--primary-blue)); padding: 20px; color: white; min-height: 100px; display: flex; flex-direction: column; justify-content: center;">
                        <h3 style="margin: 0; font-size: 18px; font-weight: 600;">{{ lesson.title }}</h3>
                        <p style="margin: 10px 0 0 0; font-size: 13px; opacity: 0.9;">{{ lesson.subtitle or 'Learn more about this topic' }}</p>
                    </div>
                    
                    <div class="card-body">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid var(--border-color);">
                            <span style="background: var(--bg-light); padding: 5px 10px; border-radius: 4px; font-size: 12px; color: var(--medium-text); font-weight: 600;">
                                üìö {{ lesson.course_title or 'General' }}
                            </span>
                        </div>
                        
                        <p style="color: var(--light-text); font-size: 14px; margin-bottom: 15px;">
                            Expand your knowledge with this comprehensive lesson covering key concepts and practical applications.
                        </p>
                        
                        <button class="btn btn-primary" style="width: 100%; margin-top: 10px;">
                            ‚ñ∂Ô∏è Start Lesson
                        </button>
                    </div>
                </div>
            {% endfor %}
        </div>
        
        <div style="margin-top: 40px; text-align: center; color: var(--light-text);">
            <p>Showing {{ lessons | length }} lesson(s)</p>
        </div>
    {% else %}
        <div style="background: #e8f0f8; border: 2px solid var(--accent-blue); padding: 40px; border-radius: 12px; text-align: center; margin-top: 40px;">
            <h2 style="color: var(--primary-navy); margin-bottom: 15px;">üì≠ No Lessons Available</h2>
            <p style="color: var(--medium-text); font-size: 16px; margin-bottom: 20px;">
                Lessons will be added to courses soon. Stay tuned for exciting content!
            </p>
            <a href="{{ url_for('course') }}" class="btn btn-primary">üìö Browse Courses</a>
        </div>
    {% endif %}
    
    <div style="margin-top: 40px; background: var(--bg-light); padding: 25px; border-radius: 8px;">
        <h3 style="color: var(--primary-navy); margin-top: 0;">üí° Learning Tips</h3>
        <ul style="color: var(--medium-text); line-height: 1.8;">
            <li><strong>Read Carefully:</strong> Take time to understand each concept before moving forward.</li>
            <li><strong>Take Notes:</strong> Write down important points to help with retention.</li>
            <li><strong>Practice:</strong> Apply what you learn through assignments and quizzes.</li>
            <li><strong>Review:</strong> Revisit lessons regularly to reinforce your learning.</li>
            <li><strong>Ask Questions:</strong> Don't hesitate to reach out if you need clarification.</li>
        </ul>
    </div>
    
    <script>
        // Search filter functionality
        document.getElementById('searchInput').addEventListener('keyup', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.lesson-card');
            
            cards.forEach(card => {
                const title = card.querySelector('h3').textContent.toLowerCase();
                const subtitle = card.querySelector('p').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || subtitle.includes(searchTerm)) {
                    card.parentElement.style.display = '';
                } else {
                    card.parentElement.style.display = 'none';
                }
            });
        });
        
        // Hover effect
        document.querySelectorAll('.lesson-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = '0 8px 16px rgba(0,0,0,0.15)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
            });
        });
    </script>
{% endblock %}
